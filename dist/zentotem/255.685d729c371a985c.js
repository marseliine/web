"use strict";(self.webpackChunkzentotem=self.webpackChunkzentotem||[]).push([[255],{3255:(C,m,s)=>{s.r(m),s.d(m,{ProfileModule:()=>Z});var f=s(6895),r=s(4006),e=s(4650),u=s(1968);let h=(()=>{class o{checkURL(){return t=>{let i=!0;try{new URL(t.value)}catch{i=!1}return i?null:{invalidUrl:!0}}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var c=s(7676),p=s(4144);function g(o,n){if(1&o&&(e.TgZ(0,"mat-error",12),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.profile.controls.firstName.value?"The firstName is invalid":"Please enter a first name"," ")}}function d(o,n){if(1&o&&(e.TgZ(0,"mat-error",12),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.profile.controls.lastName.value?"The last name is invalid":"Please enter a last name"," ")}}function b(o,n){if(1&o&&(e.TgZ(0,"mat-error",12),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.profile.controls.phone.value?"The phone is invalid":"Please enter a phone"," ")}}function x(o,n){if(1&o&&(e.TgZ(0,"mat-error",12),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.profile.controls.webSite.value?"The website is invalid":"Please enter a website"," ")}}function _(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSubmit())}),e.TgZ(1,"label",2),e._uU(2,"Profile"),e.qZA(),e.TgZ(3,"mat-form-field",3)(4,"mat-label"),e._uU(5,"Email"),e.qZA(),e._UZ(6,"input",4),e.qZA(),e.TgZ(7,"mat-form-field",3)(8,"mat-label"),e._uU(9,"First Name"),e.qZA(),e._UZ(10,"input",5),e.YNc(11,g,2,1,"mat-error",6),e.qZA(),e.TgZ(12,"mat-form-field",3)(13,"mat-label"),e._uU(14,"Last Name"),e.qZA(),e._UZ(15,"input",7),e.YNc(16,d,2,1,"mat-error",6),e.qZA(),e.TgZ(17,"mat-form-field",3)(18,"mat-label"),e._uU(19,"Phone"),e.qZA(),e._UZ(20,"input",8),e.YNc(21,b,2,1,"mat-error",6),e.qZA(),e.TgZ(22,"mat-form-field",3)(23,"mat-label"),e._uU(24,"Web Site"),e.qZA(),e._UZ(25,"input",9),e.YNc(26,x,2,1,"mat-error",6),e.qZA(),e.TgZ(27,"div",10)(28,"button",11),e._uU(29,"Update"),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.profile),e.xp6(11),e.Q6J("ngIf",t.profile.controls.firstName.errors),e.xp6(5),e.Q6J("ngIf",t.profile.controls.lastName.errors),e.xp6(5),e.Q6J("ngIf",t.profile.controls.phone.errors),e.xp6(5),e.Q6J("ngIf",t.profile.controls.webSite.errors)}}let v=(()=>{class o{constructor(t,i,a){this.userDataService=t,this.fb=i,this.customValidator=a,this.sub=[]}onSubmit(){if("VALID"!==this.profile.status)return;const i=this.userDataService.updateDataUser({id:1,login:"kate",password:"kate",firstName:this.profile.controls.firstName.value,lastName:this.profile.controls.lastName.value,email:this.profile.controls.email.value,webSite:this.profile.controls.webSite.value,phone:this.profile.controls.phone.value}).subscribe();this.sub.push(i)}ngOnInit(){this.profile=this.fb.group({email:[""],firstName:["",[r.kI.required,r.kI.maxLength(255)]],lastName:["",[r.kI.required,r.kI.maxLength(255)]],phone:["",[r.kI.required,r.kI.maxLength(12),r.kI.minLength(12)]],webSite:["",[this.customValidator.checkURL()]]});const t=this.userDataService.currentData.subscribe(a=>{if(!a.length)return;const l=a[0];this.profile.controls.email.setValue(l.email),this.profile.controls.firstName.setValue(l.firstName),this.profile.controls.lastName.setValue(l.lastName),this.profile.controls.phone.setValue(l.phone),this.profile.controls.webSite.setValue(l.webSite)});this.sub.push(t);const i=this.profile.controls.phone.valueChanges.subscribe(a=>this.checkPhoneNumber(a));this.sub.push(i)}checkPhoneNumber(t){const i=t[t.length-1];if(i&&isNaN(+i)&&this.profile.controls.phone.setValue(t.slice(0,t.length-1)),2==t.length)this.profile.controls.phone.setValue("");else if(1==t.length)this.profile.controls.phone.setValue("+7"+t);else if(t.length>=3){if("+"===t[0]&&"7"!==t[1]&&this.profile.controls.phone.setValue("+7"+t.slice(1)),"+"===t[0]&&"7"==t[1])return;"+"!==t[0]&&"7"!==t[1]&&this.profile.controls.phone.setValue("+7"+t)}}ngOnDestroy(){this.sub.forEach(t=>t.unsubscribe())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.M),e.Y36(r.qu),e.Y36(h))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile-page"]],decls:2,vars:3,consts:[["class","profile",3,"formGroup","ngSubmit",4,"ngIf"],[1,"profile",3,"formGroup","ngSubmit"],[1,"container-login__header"],["appearance","outline"],["matInput","","formControlName","email","type","email","readonly",""],["matInput","","formControlName","firstName","type","text"],["class","error-password",4,"ngIf"],["matInput","","formControlName","lastName","type","text"],["matInput","","formControlName","phone"],["matInput","","formControlName","webSite","type","text"],[1,"container-btn"],["type","submit",1,"container-login__submit"],[1,"error-password"]],template:function(t,i){if(1&t&&(e.YNc(0,_,30,5,"form",0),e.ALo(1,"async")),2&t){let a;e.Q6J("ngIf",null==(a=e.lcZ(1,1,i.userDataService.currentData))?null:a.length)}},dependencies:[f.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,c.KE,c.hX,c.TO,p.Nt,f.Ov],styles:[".profile[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;width:700px;height:auto;border-radius:5px;padding:20px;margin-top:70px;font-size:14px}.container-login__header[_ngcontent-%COMP%]{color:#9932cc;margin-bottom:10px;font-size:18px}.container-btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.container-login__submit[_ngcontent-%COMP%]{height:50px;width:200px;background:#BA55D3;border-radius:5px;display:flex;justify-content:center;align-items:center;color:#fff;border:0;cursor:pointer}.container-login__submit[_ngcontent-%COMP%]:active{background:#BA55D3}"]}),o})();var P=s(6319);const N=[{path:"",component:v},{path:"**",redirectTo:"",pathMatch:"full"}];let Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.ez,P.Bz.forChild(N),r.u5,r.UX,c.lN,p.c]}),o})()}}]);